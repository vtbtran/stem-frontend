.blockly-host {
  position: relative;
}


.blockly-host .blocklySvg,
.blockly-host .blocklySvg *,
.blockly-host .blocklyWidgetDiv,
.blockly-host .blocklyWidgetDiv *,
.blockly-host .blocklyTooltipDiv,
.blockly-host .blocklyTooltipDiv *,
.blockly-host .blocklyDropDownDiv,
.blockly-host .blocklyDropDownDiv * {
  box-sizing: content-box;
}

/* Tailwind sometimes forces image display:block; keep SVG image behavior */
.blockly-host .blocklySvg image {
  display: inline-block;
}

.blockly-host .blocklyHidden {
  display: none !important;
}

/* ---------- Toolbox ---------- */
/* ---------- Toolbox ---------- */
/* Hide native toolbox as we are using React Custom Toolbox */
.blockly-host .blocklyToolboxDiv {
  display: none !important;
}

/* ---------- Toolbox Icons (Material Icons) ---------- */
/* ---------- Toolbox Icons (Material Icons) ---------- */
.blocklyTreeRow {
  height: 44px !important;
  line-height: 44px !important;
  padding-left: 12px !important;
  display: flex !important;
  align-items: center !important;
}

/* Icon Container - target the specific icon span */
.blocklyTreeRow .blocklyTreeIcon {
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  width: 20px !important;
  height: 20px !important;
  margin-right: 12px !important;
  background-color: transparent !important;
  border: none !important;
  font-family: 'Material Icons Round';
  font-weight: normal;
  font-style: normal;
  font-size: 20px !important;
  line-height: 1;
  color: #64748B !important; /* Xám mặc định #64748B */
  transition: all 0.2s ease;
}

/* Fix image icons to match the color using filters */
.blocklyTreeRow .blocklyTreeIcon[style*="background-image"], 
.blocklyTreeIcon.category-control,
.blocklyTreeIcon.category-hardware,
.blocklyTreeIcon.category-speech,
.blocklyTreeIcon.category-sound {
  filter: grayscale(100%) opacity(0.7);
}

/* Sidebar Interaction States - UNIFIED PROFESSIONAL STYLE */
.blocklyTreeRow {
  height: 44px !important;
  line-height: 44px !important;
  padding: 0 12px !important;
  margin-bottom: 4px;
  border-radius: 12px !important; /* Pill shape */
  border: none !important; /* No left border */
  color: #334155 !important; /* Text Normal: #334155 */
  font-family: 'Inter', 'Roboto', sans-serif !important;
  font-weight: 500 !important;
  font-size: 14px !important;
  transition: all 0.2s ease;
  display: flex !important;
  align-items: center !important;
}

/* Hover State */
.blocklyTreeRow:hover {
  background-color: #F1F5F9 !important; /* Hover bg: #F1F5F9 */
  color: #0F172A !important;
}

/* Selected State */
.blocklyTreeSelected .blocklyTreeRow {
  background-color: #EFF6FF !important; /* Selected bg: #EFF6FF */
  color: #2563EB !important; /* Selected text: #2563EB */
}

/* Selected Icon Color */
.blocklyTreeSelected .blocklyTreeRow .blocklyTreeIcon {
  color: #2563EB !important;
}

/* Selected Image Icons - Force Blue Filter (#2563EB) */
.blocklyTreeSelected .blocklyTreeRow .blocklyTreeIcon[style*="background-image"],
.blocklyTreeSelected .blocklyTreeRow .blocklyTreeIcon.category-control,
.blocklyTreeSelected .blocklyTreeRow .blocklyTreeIcon.category-hardware,
.blocklyTreeSelected .blocklyTreeRow .blocklyTreeIcon.category-speech,
.blocklyTreeSelected .blocklyTreeRow .blocklyTreeIcon.category-sound {
  filter: brightness(0) saturate(100%) invert(31%) sepia(95%) saturate(1631%) hue-rotate(204deg) brightness(101%) contrast(100%) !important;
  opacity: 1 !important;
}

/* Category Specific Icons - Image Integration */
.blocklyTreeIcon.category-control,
.blocklyTreeIcon.category-hardware,
.blocklyTreeIcon.category-speech,
.blocklyTreeIcon.category-sound {
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px;
}

.blocklyTreeIcon.category-control {
  background-image: url("/icons/control-system.png");
}

.blocklyTreeIcon.category-hardware {
  background-image: url("/icons/desk-lamp.png");
}

.blocklyTreeIcon.category-speech {
  background-image: url("/icons/conversation.png");
}

.blocklyTreeIcon.category-sound {
  background-image: url("/icons/speaker-filled-audio-tool.png");
}

/* Remove pseudo-elements for image icons */
.blocklyTreeIcon.category-control::before,
.blocklyTreeIcon.category-hardware::before,
.blocklyTreeIcon.category-speech::before,
.blocklyTreeIcon.category-sound::before {
  content: none !important;
  display: none !important;
}

/* Logic & Loops - Secondary Group */
.blocklyTreeIcon.category-logic::before {
  content: "share";
  color: #FBBF24;
}

/* Logic - Amber-400 */
.blocklyTreeIcon.category-loops::before {
  content: "loop";
  color: #A78BFA;
}

/* Vòng lặp - Violet-400 */
.blocklyTreeIcon.category-math::before {
  content: "calculate";
  color: #FB7185;
}

/* Toán học - Rose-400 */
.blocklyTreeIcon.category-text::before {
  content: "text_fields";
  color: #F97316;
}

/* Văn bản - Orange-500 */
.blocklyTreeIcon.category-lists::before {
  content: "list";
  color: #F97316;
}

/* Danh sách - Match Text */
.blocklyTreeIcon.category-variables::before {
  content: "data_usage";
  color: #F97316;
}

/* Biến - Match Text */
.blocklyTreeIcon.category-functions::before {
  content: "functions";
  color: #A78BFA;
}

/* Hàm - Match Loops */

/* ---------- Flyout ---------- */
.blockly-host .blocklyFlyoutBackground {
  fill: #ffffff !important;
  fill-opacity: 1 !important;
}

.blockly-host .blocklyFlyout {
  border-right: 2px solid #e2e8f0 !important;
  box-shadow: 10px 0 20px rgba(2, 6, 23, 0.06);
}

/* Flyout scrollbar */
.blockly-host .blocklyFlyout .blocklyScrollbarHandle {
  fill: #cbd5e1 !important;
  /* slate-300 */
}

.blockly-host .blocklyScrollbarHandle {
  fill: #cbd5e1 !important;
}

.blockly-host .blocklyScrollbarBackground {
  fill: rgba(15, 23, 42, 0.04) !important;
}

.blockly-host .blocklyMainBackground {
  stroke-width: 0 !important;
}

.blockly-host::before {
  content: "";
  position: absolute;
  left: 380px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: #f1f5f9;
  z-index: 2;
  pointer-events: none;
}